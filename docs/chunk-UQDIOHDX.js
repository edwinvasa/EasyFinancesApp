import{a as G,b as x,c as ue,d as ce,e as Re,f as Le,g as We,h as ke}from"./chunk-KUVXZ373.js";import{a as re}from"./chunk-CPFYZJBR.js";import{C as d,D as p,Da as Fe,Ea as w,Fa as B,Ga as T,H as I,Ha as N,Ia as V,J as m,Ja as A,Ka as F,Ma as X,N as t,Na as Z,O as i,Oa as $,P as pe,Pa as ne,Qa as oe,Ra as P,S,Ta as Pe,U as E,V as D,W as M,Wa as Oe,X as r,Xa as C,Y as v,Z as K,Za as _,_ as H,_a as ee,a as L,aa as f,ab as Te,b as J,ba as b,bb as te,ca as h,cb as je,ea as U,fa as me,ga as W,ha as k,i as Ve,j as de,n as y,o as le,pa as R,qa as Q,s as u,t as c,ua as Ae}from"./chunk-XZMT7WZ3.js";var ze=a=>["/budgets/update",a],Ye=a=>["/budgets/clone",a],He=a=>["/budgets/expenses",a],Je=a=>["/budgets/incomes",a],Ke=a=>["/budgets/daily-expenses",a];function Qe(a,n){a&1&&(t(0,"div",5),r(1," No hay presupuestos disponibles. "),i())}function Xe(a,n){if(a&1){let e=S();t(0,"tr")(1,"td"),r(2),i(),t(3,"td"),r(4),i(),t(5,"td"),r(6),i(),t(7,"td"),r(8),W(9,"customCurrency"),i(),t(10,"td"),r(11),W(12,"customCurrency"),i(),t(13,"td"),r(14),W(15,"customCurrency"),i(),t(16,"td"),r(17),W(18,"customCurrency"),i(),t(19,"td"),r(20),W(21,"customCurrency"),i(),t(22,"td"),r(23),W(24,"customCurrency"),i(),t(25,"td")(26,"button",8),r(27," Editar "),i(),t(28,"button",9),E("click",function(){let l=u(e).$implicit,g=D(2);return c(g.confirmDelete(l.budgetId))}),r(29," Eliminar "),i(),t(30,"button",10),r(31," Clonar "),i(),t(32,"button",11),r(33," Ver Gastos "),i(),t(34,"button",11),r(35," Ver Ingresos "),i(),t(36,"button",11),r(37," Ver Gastos Diarios "),i()()()}if(a&2){let e=n.$implicit;d(2),v(e.description),d(2),v(e.month),d(2),v(e.year),d(2),v(k(9,14,e.totalIncome)),d(3),v(k(12,16,e.totalExpenses)),d(3),v(k(15,18,e.executed)),d(3),v(k(18,20,e.nonBudgetedExpenses)),d(3),v(k(21,22,e.pendingPayment)),d(3),v(k(24,24,e.shouldHave)),d(3),m("routerLink",U(26,ze,e.budgetId)),d(4),m("routerLink",U(28,Ye,e.budgetId)),d(2),m("routerLink",U(30,He,e.budgetId)),d(2),m("routerLink",U(32,Je,e.budgetId)),d(2),m("routerLink",U(34,Ke,e.budgetId))}}function Ze(a,n){if(a&1&&(t(0,"table",6)(1,"thead")(2,"tr")(3,"th"),r(4,"Descripci\xF3n"),i(),t(5,"th"),r(6,"Mes"),i(),t(7,"th"),r(8,"A\xF1o"),i(),t(9,"th"),r(10,"Ingreso"),i(),t(11,"th"),r(12,"Gastos"),i(),t(13,"th"),r(14,"Realizado"),i(),t(15,"th"),r(16,"No presupuestado"),i(),t(17,"th"),r(18,"Pendiente"),i(),t(19,"th"),r(20,"Deber\xEDa tener"),i(),t(21,"th"),r(22,"Acciones"),i()()(),t(23,"tbody"),I(24,Xe,38,36,"tr",7),i()()),a&2){let e=D();d(24),m("ngForOf",e.budgets)}}var ge=class a{constructor(n,e){this.budgetsService=n;this.authService=e}budgets=[];userId="";ngOnInit(){this.userId=this.authService.getUserIdFromToken(),this.userId?this.fetchBudgets():console.error("No se pudo obtener el usuario del token.","Error")}fetchBudgets(){this.userId&&this.budgetsService.getBudgetsByUser(this.userId).subscribe({next:n=>this.budgets=n,error:n=>console.error("Error al obtener presupuestos",n)})}confirmDelete(n){confirm("\xBFEst\xE1s seguro de que deseas eliminar este presupuesto?")&&this.deleteBudget(n)}deleteBudget(n){this.userId&&this.budgetsService.deleteBudget(this.userId,n).subscribe({next:()=>{alert("Presupuesto eliminado con \xE9xito"),this.fetchBudgets()},error:e=>{console.error("Error al eliminar el presupuesto",e),alert("Ocurri\xF3 un error al eliminar el presupuesto")}})}static \u0275fac=function(e){return new(e||a)(p(x),p(G))};static \u0275cmp=y({type:a,selectors:[["app-budgets-list"]],decls:8,vars:2,consts:[[1,"container","mt-4"],["class","alert alert-info",4,"ngIf"],[1,"d-flex","justify-content-end","mb-3"],["routerLink","/budgets/create",1,"btn","btn-success"],["class","table table-bordered mt-3",4,"ngIf"],[1,"alert","alert-info"],[1,"table","table-bordered","mt-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"routerLink"],[1,"btn","btn-info","btn-sm",3,"routerLink"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2"),r(2,"Gesti\xF3n de Presupuestos"),i(),I(3,Qe,2,0,"div",1),t(4,"div",2)(5,"button",3),r(6,"+ Crear Presupuesto"),i()(),I(7,Ze,25,1,"table",4),i()),e&2&&(d(3),m("ngIf",o.budgets.length===0),d(4),m("ngIf",o.budgets.length>0))},dependencies:[R,Q,ee,te],styles:[".container[_ngcontent-%COMP%]{max-width:98%;margin:0 auto}table[_ngcontent-%COMP%]{width:100%;text-align:left}"]})};var fe=class a{constructor(n,e,o){this.budgetsService=n;this.router=e;this.authService=o}budget={description:"",month:new Date().getMonth()+1,year:new Date().getFullYear()};userId="";ngOnInit(){this.userId=this.authService.getUserIdFromToken()}createBudget(){if(!this.userId)return;let n=J(L({},this.budget),{userId:this.userId});this.budgetsService.createBudget(n).subscribe({next:e=>{alert("Presupuesto creado con \xE9xito"),this.router.navigate(["/budgets"])},error:e=>{console.error("Error al crear el presupuesto",e),alert("Ocurri\xF3 un error al crear el presupuesto")}})}static \u0275fac=function(e){return new(e||a)(p(x),p(_),p(G))};static \u0275cmp=y({type:a,selectors:[["app-create-budget"]],decls:20,vars:4,consts:[["budgetForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","description",1,"form-label"],["type","text","id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-6","mb-3"],["for","month",1,"form-label"],["type","number","id","month","name","month","required","","min","1","max","12",1,"form-control",3,"ngModelChange","ngModel"],["for","year",1,"form-label"],["type","number","id","year","name","year","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Crear Presupuesto"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.createBudget())}),t(5,"div",3)(6,"label",4),r(7,"Descripci\xF3n"),i(),t(8,"input",5),h("ngModelChange",function(s){return u(l),b(o.budget.description,s)||(o.budget.description=s),c(s)}),i()(),t(9,"div",6)(10,"div",7)(11,"label",8),r(12,"Mes"),i(),t(13,"input",9),h("ngModelChange",function(s){return u(l),b(o.budget.month,s)||(o.budget.month=s),c(s)}),i()(),t(14,"div",7)(15,"label",10),r(16,"A\xF1o"),i(),t(17,"input",11),h("ngModelChange",function(s){return u(l),b(o.budget.year,s)||(o.budget.year=s),c(s)}),i()()(),t(18,"button",12),r(19," Crear Presupuesto "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.budget.description),d(5),f("ngModel",o.budget.month),d(4),f("ngModel",o.budget.year),d(),m("disabled",!l.valid)}},dependencies:[A,w,F,B,T,P,oe,ne,V,N]})};function $e(a,n){if(a&1&&(t(0,"div")(1,"p")(2,"strong"),r(3,"Presupuesto base:"),i(),r(4),i(),t(5,"p")(6,"strong"),r(7,"Mes:"),i(),r(8),i(),t(9,"p")(10,"strong"),r(11,"A\xF1o:"),i(),r(12),i()()),a&2){let e=D();d(4),K(" ",e.budgetToClone.description,""),d(4),K(" ",e.budgetToClone.month,""),d(4),K(" ",e.budgetToClone.year,"")}}var be=class a{constructor(n,e,o,l){this.route=n;this.budgetsService=e;this.router=o;this.authService=l}budgetToClone=null;cloneData={month:new Date().getMonth()+1,year:new Date().getFullYear(),description:"",cloneIncomeDetails:!0};userId="";ngOnInit(){if(this.userId=this.authService.getUserIdFromToken(),this.userId){let n=this.route.snapshot.paramMap.get("budgetId");n&&this.fetchBudgetToClone(n)}else console.error("No se pudo obtener el usuario del token.","Error")}fetchBudgetToClone(n){this.userId&&this.budgetsService.getBudgetById(this.userId,n).subscribe({next:e=>this.budgetToClone=e,error:e=>{console.error("Error al obtener el presupuesto",e),alert("No se pudo cargar el presupuesto a clonar"),this.router.navigate(["/budgets"])}})}cloneBudget(){let n=L({budgetId:this.budgetToClone?.budgetId,userId:this.userId},this.cloneData);this.budgetsService.cloneBudget(n).subscribe({next:()=>{alert("Presupuesto clonado con \xE9xito"),this.router.navigate(["/budgets"])},error:e=>{console.error("Error al clonar el presupuesto",e),alert("Ocurri\xF3 un error al clonar el presupuesto")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(_),p(G))};static \u0275cmp=y({type:a,selectors:[["app-clone-budget"]],decls:26,vars:6,consts:[["cloneForm","ngForm"],[1,"container","mt-4"],[4,"ngIf"],[3,"ngSubmit"],[1,"mb-3"],["for","description",1,"form-label"],["type","text","id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-6","mb-3"],["for","month",1,"form-label"],["type","number","id","month","name","month","required","","min","1","max","12",1,"form-control",3,"ngModelChange","ngModel"],["for","year",1,"form-label"],["type","number","id","year","name","year","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-check"],["type","checkbox","id","cloneIncomeDetails","name","cloneIncomeDetails",1,"form-check-input",3,"ngModelChange","ngModel"],["for","cloneIncomeDetails",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Clonar Presupuesto"),i(),I(3,$e,13,3,"div",2),t(4,"form",3,0),E("ngSubmit",function(){return u(l),c(o.cloneBudget())}),t(6,"div",4)(7,"label",5),r(8,"Nueva Descripci\xF3n"),i(),t(9,"input",6),h("ngModelChange",function(s){return u(l),b(o.cloneData.description,s)||(o.cloneData.description=s),c(s)}),i()(),t(10,"div",7)(11,"div",8)(12,"label",9),r(13,"Nuevo Mes"),i(),t(14,"input",10),h("ngModelChange",function(s){return u(l),b(o.cloneData.month,s)||(o.cloneData.month=s),c(s)}),i()(),t(15,"div",8)(16,"label",11),r(17,"Nuevo A\xF1o"),i(),t(18,"input",12),h("ngModelChange",function(s){return u(l),b(o.cloneData.year,s)||(o.cloneData.year=s),c(s)}),i()()(),t(19,"div",4)(20,"div",13)(21,"input",14),h("ngModelChange",function(s){return u(l),b(o.cloneData.cloneIncomeDetails,s)||(o.cloneData.cloneIncomeDetails=s),c(s)}),i(),t(22,"label",15),r(23," Clonar detalles de ingresos "),i()()(),t(24,"button",16),r(25," Clonar Presupuesto "),i()()()}if(e&2){let l=M(5);d(3),m("ngIf",o.budgetToClone),d(6),f("ngModel",o.cloneData.description),d(5),f("ngModel",o.cloneData.month),d(4),f("ngModel",o.cloneData.year),d(3),f("ngModel",o.cloneData.cloneIncomeDetails),d(3),m("disabled",!l.valid)}},dependencies:[Q,A,w,F,Fe,B,T,P,oe,ne,V,N]})};var he=class a{constructor(n,e,o,l){this.route=n;this.budgetsService=e;this.router=o;this.authService=l}budgetId=null;budgetData={description:"",month:1,year:new Date().getFullYear()};userId="";ngOnInit(){this.userId=this.authService.getUserIdFromToken(),this.userId?(this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.budgetId&&this.fetchBudgetData(this.budgetId)):console.error("No se pudo obtener el usuario del token.","Error")}fetchBudgetData(n){this.userId&&this.budgetsService.getBudgetById(this.userId,n).subscribe({next:e=>{this.budgetData={description:e.description,month:e.month,year:e.year}},error:e=>{console.error("Error al obtener presupuesto",e),alert("No se pudo cargar el presupuesto"),this.router.navigate(["/budgets"])}})}updateBudget(){if(!this.userId||!this.budgetId)return;let n=L({},this.budgetData);this.budgetsService.updateBudget(this.userId,this.budgetId,n).subscribe({next:()=>{alert("Presupuesto actualizado con \xE9xito"),this.router.navigate(["/budgets"])},error:e=>{console.error("Error al actualizar el presupuesto",e),alert("Ocurri\xF3 un error al actualizar el presupuesto")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(_),p(G))};static \u0275cmp=y({type:a,selectors:[["app-update-budget"]],decls:20,vars:4,consts:[["updateForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","description",1,"form-label"],["type","text","id","description","name","description","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-6","mb-3"],["for","month",1,"form-label"],["type","number","id","month","name","month","required","","min","1","max","12",1,"form-control",3,"ngModelChange","ngModel"],["for","year",1,"form-label"],["type","number","id","year","name","year","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Actualizar Presupuesto"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.updateBudget())}),t(5,"div",3)(6,"label",4),r(7,"Descripci\xF3n"),i(),t(8,"input",5),h("ngModelChange",function(s){return u(l),b(o.budgetData.description,s)||(o.budgetData.description=s),c(s)}),i()(),t(9,"div",6)(10,"div",7)(11,"label",8),r(12,"Mes"),i(),t(13,"input",9),h("ngModelChange",function(s){return u(l),b(o.budgetData.month,s)||(o.budgetData.month=s),c(s)}),i()(),t(14,"div",7)(15,"label",10),r(16,"A\xF1o"),i(),t(17,"input",11),h("ngModelChange",function(s){return u(l),b(o.budgetData.year,s)||(o.budgetData.year=s),c(s)}),i()()(),t(18,"button",12),r(19," Actualizar Presupuesto "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.budgetData.description),d(5),f("ngModel",o.budgetData.month),d(4),f("ngModel",o.budgetData.year),d(),m("disabled",!l.valid)}},dependencies:[A,w,F,B,T,P,oe,ne,V,N]})};var et=a=>["/budgets/expenses/add",a],tt=(a,n)=>["/budgets/expenses/update",a,n];function it(a,n){if(a&1){let e=S();t(0,"tr")(1,"td"),r(2),i(),t(3,"td"),r(4),i(),t(5,"td"),r(6),i(),t(7,"td"),r(8),W(9,"customCurrency"),i(),t(10,"td"),r(11),W(12,"customCurrency"),i(),t(13,"td"),r(14),W(15,"customCurrency"),i(),t(16,"td")(17,"button",5),r(18," Editar "),i(),t(19,"button",6),E("click",function(){let l=u(e).$implicit,g=D();return c(g.confirmDelete(l.expenseBudgetDetailId))}),r(20," Eliminar "),i()()()}if(a&2){let e=n.$implicit,o=D();d(2),v(e.customName),d(2),v(e.expenseTypeName),d(2),v(e.expenseTypeCategory),d(2),v(k(9,7,e.budgetedAmount)),d(3),v(k(12,9,e.amountPaid)),d(3),v(k(15,11,e.pendingPayment)),d(3),m("routerLink",me(13,tt,o.budgetId,e.expenseBudgetDetailId))}}var ye=class a{constructor(n,e){this.route=n;this.budgetsService=e}expenses=[];budgetId=null;ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.budgetId&&this.fetchExpenses(this.budgetId)}fetchExpenses(n){this.budgetsService.getExpensesByBudget(n).subscribe({next:e=>this.expenses=e,error:e=>console.error("Error al obtener gastos",e)})}confirmDelete(n){confirm("\xBFEst\xE1s seguro de que deseas eliminar este gasto?")&&this.budgetId&&this.deleteExpense(this.budgetId,n)}deleteExpense(n,e){this.budgetsService.deleteExpense(n,e).subscribe({next:()=>{alert("Gasto eliminado con \xE9xito"),this.fetchExpenses(n)},error:o=>{console.error("Error al eliminar el gasto",o),alert("Ocurri\xF3 un error al eliminar el gasto")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x))};static \u0275cmp=y({type:a,selectors:[["app-expenses-list"]],decls:25,vars:4,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-success",3,"routerLink"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2"),r(2,"Gastos del Presupuesto"),i(),t(3,"div",1)(4,"button",2),r(5," + Agregar Gasto "),i()(),t(6,"table",3)(7,"thead")(8,"tr")(9,"th"),r(10,"Nombre"),i(),t(11,"th"),r(12,"Tipo"),i(),t(13,"th"),r(14,"Categor\xEDa"),i(),t(15,"th"),r(16,"Presupuestado"),i(),t(17,"th"),r(18,"Pagado"),i(),t(19,"th"),r(20,"Pendiente"),i(),t(21,"th"),r(22,"Acciones"),i()()(),t(23,"tbody"),I(24,it,21,16,"tr",4),i()()()),e&2&&(d(4),m("routerLink",U(2,et,o.budgetId)),d(20),m("ngForOf",o.expenses))},dependencies:[R,ee,te]})};function nt(a,n){if(a&1&&(t(0,"option",12),r(1),i()),a&2){let e=n.$implicit;m("value",e.id),d(),H(" ",e.name," (",e.category,") ")}}var xe=class a{constructor(n,e,o,l){this.route=n;this.budgetsService=e;this.expenseTypeService=o;this.router=l}budgetId=null;expenseData={customName:"",expenseTypeId:0,budgetedAmount:0};expenseTypes=[];ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.fetchExpenseTypes()}fetchExpenseTypes(){this.expenseTypeService.getExpenseTypes().subscribe({next:n=>this.expenseTypes=n,error:n=>console.error("Error al obtener tipos de gastos",n)})}addExpense(){if(!this.budgetId)return;let n=J(L({},this.expenseData),{budgetId:this.budgetId});this.budgetsService.addExpense(n).subscribe({next:()=>{alert("Gasto agregado con \xE9xito"),this.router.navigate([`/budgets/expenses/${this.budgetId}`])},error:e=>{console.error("Error al agregar el gasto",e),alert("Ocurri\xF3 un error al agregar el gasto")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(re),p(_))};static \u0275cmp=y({type:a,selectors:[["app-add-expense"]],decls:20,vars:5,consts:[["expenseForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","customName",1,"form-label"],["type","text","id","customName","name","customName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","expenseTypeId",1,"form-label"],["id","expenseTypeId","name","expenseTypeId","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","budgetedAmount",1,"form-label"],["type","number","id","budgetedAmount","name","budgetedAmount","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Agregar Gasto"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.addExpense())}),t(5,"div",3)(6,"label",4),r(7,"Nombre del Gasto"),i(),t(8,"input",5),h("ngModelChange",function(s){return u(l),b(o.expenseData.customName,s)||(o.expenseData.customName=s),c(s)}),i()(),t(9,"div",3)(10,"label",6),r(11,"Tipo de Gasto"),i(),t(12,"select",7),h("ngModelChange",function(s){return u(l),b(o.expenseData.expenseTypeId,s)||(o.expenseData.expenseTypeId=s),c(s)}),I(13,nt,2,3,"option",8),i()(),t(14,"div",3)(15,"label",9),r(16,"Monto Presupuestado"),i(),t(17,"input",10),h("ngModelChange",function(s){return u(l),b(o.expenseData.budgetedAmount,s)||(o.expenseData.budgetedAmount=s),c(s)}),i()(),t(18,"button",11),r(19," Agregar Gasto "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.expenseData.customName),d(4),f("ngModel",o.expenseData.expenseTypeId),d(),m("ngForOf",o.expenseTypes),d(4),f("ngModel",o.expenseData.budgetedAmount),d(),m("disabled",!l.valid)}},dependencies:[R,A,Z,$,w,F,X,B,T,P,V,N]})};function ot(a,n){if(a&1&&(t(0,"option",12),r(1),i()),a&2){let e=n.$implicit;m("value",e.id),d(),H(" ",e.name," (",e.category,") ")}}var ve=class a{constructor(n,e,o,l){this.route=n;this.budgetsService=e;this.expenseTypeService=o;this.router=l}budgetId=null;expenseId=null;expenseData={customName:"",expenseTypeId:0,budgetedAmount:0};expenseTypes=[];ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.expenseId=Number(this.route.snapshot.paramMap.get("expenseId")),this.budgetId&&this.expenseId&&this.fetchExpenseData(this.budgetId,this.expenseId),this.fetchExpenseTypes()}fetchExpenseData(n,e){this.budgetsService.getExpensesByBudget(n).subscribe({next:o=>{let l=o.find(g=>g.expenseBudgetDetailId===e);l&&(this.expenseData={customName:l.customName,expenseTypeId:l.expenseTypeId,budgetedAmount:l.budgetedAmount})},error:o=>console.error("Error al obtener gasto",o)})}fetchExpenseTypes(){this.expenseTypeService.getExpenseTypes().subscribe({next:n=>this.expenseTypes=n,error:n=>console.error("Error al obtener tipos de gastos",n)})}updateExpense(){if(!this.budgetId||!this.expenseId)return;let n={budgetId:this.budgetId,expenseBudgetDetailId:this.expenseId,budgetedAmount:this.expenseData.budgetedAmount,customName:this.expenseData.customName,expenseTypeId:this.expenseData.expenseTypeId};this.budgetsService.updateExpense(n).subscribe({next:()=>{alert("Gasto actualizado con \xE9xito"),this.router.navigate([`/budgets/expenses/${this.budgetId}`])},error:e=>{console.error("Error al actualizar el gasto",e),alert("Ocurri\xF3 un error al actualizar el gasto")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(re),p(_))};static \u0275cmp=y({type:a,selectors:[["app-update-expense"]],decls:20,vars:5,consts:[["expenseForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","customName",1,"form-label"],["type","text","id","customName","name","customName","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","expenseTypeId",1,"form-label"],["id","expenseTypeId","name","expenseTypeId","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","budgetedAmount",1,"form-label"],["type","number","id","budgetedAmount","name","budgetedAmount","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Actualizar Gasto"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.updateExpense())}),t(5,"div",3)(6,"label",4),r(7,"Nombre del Gasto"),i(),t(8,"input",5),h("ngModelChange",function(s){return u(l),b(o.expenseData.customName,s)||(o.expenseData.customName=s),c(s)}),i()(),t(9,"div",3)(10,"label",6),r(11,"Tipo de Gasto"),i(),t(12,"select",7),h("ngModelChange",function(s){return u(l),b(o.expenseData.expenseTypeId,s)||(o.expenseData.expenseTypeId=s),c(s)}),I(13,ot,2,3,"option",8),i()(),t(14,"div",3)(15,"label",9),r(16,"Monto Presupuestado"),i(),t(17,"input",10),h("ngModelChange",function(s){return u(l),b(o.expenseData.budgetedAmount,s)||(o.expenseData.budgetedAmount=s),c(s)}),i()(),t(18,"button",11),r(19," Actualizar Gasto "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.expenseData.customName),d(4),f("ngModel",o.expenseData.expenseTypeId),d(),m("ngForOf",o.expenseTypes),d(4),f("ngModel",o.expenseData.budgetedAmount),d(),m("disabled",!l.valid)}},dependencies:[R,A,Z,$,w,F,X,B,T,P,V,N]})};var rt=a=>["/budgets/incomes/add",a],at=(a,n)=>["/budgets/incomes/update",a,n];function st(a,n){if(a&1){let e=S();t(0,"tr")(1,"td"),r(2),i(),t(3,"td"),r(4),W(5,"customCurrency"),i(),t(6,"td")(7,"button",5),r(8," Editar "),i(),t(9,"button",6),E("click",function(){let l=u(e).$implicit,g=D();return c(g.confirmDelete(l.incomeBudgetDetailId))}),r(10," Eliminar "),i()()()}if(a&2){let e=n.$implicit,o=D();d(2),v(e.name),d(2),v(k(5,3,e.amount)),d(3),m("routerLink",me(5,at,o.budgetId,e.incomeBudgetDetailId))}}var Ie=class a{constructor(n,e){this.route=n;this.budgetsService=e}incomes=[];budgetId=null;ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.budgetId&&this.fetchIncomes(this.budgetId)}fetchIncomes(n){this.budgetsService.getIncomesByBudget(n).subscribe({next:e=>this.incomes=e,error:e=>console.error("Error al obtener ingresos",e)})}confirmDelete(n){confirm("\xBFEst\xE1s seguro de que deseas eliminar este ingreso?")&&this.budgetId&&this.deleteIncome(this.budgetId,n)}deleteIncome(n,e){this.budgetsService.deleteIncome(n,e).subscribe({next:()=>{alert("Ingreso eliminado con \xE9xito"),this.fetchIncomes(n)},error:o=>{console.error("Error al eliminar el ingreso",o),alert("Ocurri\xF3 un error al eliminar el ingreso")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x))};static \u0275cmp=y({type:a,selectors:[["app-incomes-list"]],decls:17,vars:4,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-success",3,"routerLink"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2"),r(2,"Ingresos del Presupuesto"),i(),t(3,"div",1)(4,"button",2),r(5," + Agregar Ingreso "),i()(),t(6,"table",3)(7,"thead")(8,"tr")(9,"th"),r(10,"Nombre"),i(),t(11,"th"),r(12,"Monto"),i(),t(13,"th"),r(14,"Acciones"),i()()(),t(15,"tbody"),I(16,st,11,8,"tr",4),i()()()),e&2&&(d(4),m("routerLink",U(2,rt,o.budgetId)),d(12),m("ngForOf",o.incomes))},dependencies:[R,ee,te]})};var Ee=class a{constructor(n,e,o){this.route=n;this.budgetsService=e;this.router=o}budgetId=null;incomeData={name:"",amount:0};ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId")}addIncome(){if(!this.budgetId)return;let n=J(L({},this.incomeData),{budgetId:this.budgetId});this.budgetsService.addIncome(n).subscribe({next:()=>{alert("Ingreso agregado con \xE9xito"),this.router.navigate([`/budgets/incomes/${this.budgetId}`])},error:e=>{console.error("Error al agregar ingreso",e),alert("Ocurri\xF3 un error al agregar el ingreso")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(_))};static \u0275cmp=y({type:a,selectors:[["app-add-income"]],decls:15,vars:3,consts:[["incomeForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","amount",1,"form-label"],["type","number","id","amount","name","amount","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Agregar Ingreso"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.addIncome())}),t(5,"div",3)(6,"label",4),r(7,"Nombre del Ingreso"),i(),t(8,"input",5),h("ngModelChange",function(s){return u(l),b(o.incomeData.name,s)||(o.incomeData.name=s),c(s)}),i()(),t(9,"div",3)(10,"label",6),r(11,"Monto"),i(),t(12,"input",7),h("ngModelChange",function(s){return u(l),b(o.incomeData.amount,s)||(o.incomeData.amount=s),c(s)}),i()(),t(13,"button",8),r(14," Agregar Ingreso "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.incomeData.name),d(4),f("ngModel",o.incomeData.amount),d(),m("disabled",!l.valid)}},dependencies:[A,w,F,B,T,P,V,N]})};var Se=class a{constructor(n,e,o){this.route=n;this.budgetsService=e;this.router=o}budgetId=null;incomeId=null;incomeData={name:"",amount:0};ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.incomeId=Number(this.route.snapshot.paramMap.get("incomeId")),this.budgetId&&this.incomeId&&this.fetchIncomeData(this.budgetId,this.incomeId)}fetchIncomeData(n,e){this.budgetsService.getIncomesByBudget(n).subscribe({next:o=>{let l=o.find(g=>g.incomeBudgetDetailId===e);l&&(this.incomeData={name:l.name,amount:l.amount})},error:o=>console.error("Error al obtener ingreso",o)})}updateIncome(){if(!this.budgetId||!this.incomeId)return;let n={name:this.incomeData.name,amount:this.incomeData.amount};this.budgetsService.updateIncome(this.budgetId,this.incomeId,n).subscribe({next:()=>{alert("Ingreso actualizado con \xE9xito"),this.router.navigate([`/budgets/incomes/${this.budgetId}`])},error:e=>{console.error("Error al actualizar ingreso",e),alert("Ocurri\xF3 un error al actualizar el ingreso")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(_))};static \u0275cmp=y({type:a,selectors:[["app-update-income"]],decls:15,vars:3,consts:[["incomeForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","amount",1,"form-label"],["type","number","id","amount","name","amount","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Actualizar Ingreso"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.updateIncome())}),t(5,"div",3)(6,"label",4),r(7,"Nombre del Ingreso"),i(),t(8,"input",5),h("ngModelChange",function(s){return u(l),b(o.incomeData.name,s)||(o.incomeData.name=s),c(s)}),i()(),t(9,"div",3)(10,"label",6),r(11,"Monto"),i(),t(12,"input",7),h("ngModelChange",function(s){return u(l),b(o.incomeData.amount,s)||(o.incomeData.amount=s),c(s)}),i()(),t(13,"button",8),r(14," Actualizar Ingreso "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.incomeData.name),d(4),f("ngModel",o.incomeData.amount),d(),m("disabled",!l.valid)}},dependencies:[A,w,F,B,T,P,V,N]})};var ae=class a{expenseData;setExpenseData(n){this.expenseData=n}getExpenseData(){return this.expenseData}clearExpenseData(){this.expenseData=null}static \u0275fac=function(e){return new(e||a)};static \u0275prov=Ve({token:a,factory:a.\u0275fac,providedIn:"root"})};var dt=a=>["/budgets/daily-expenses/add",a];function lt(a,n){if(a&1){let e=S();t(0,"tr")(1,"td"),r(2),i(),t(3,"td"),r(4),i(),t(5,"td"),r(6),i(),t(7,"td"),r(8),i(),t(9,"td"),r(10),W(11,"customCurrency"),i(),t(12,"td"),r(13),i(),t(14,"td"),r(15),i(),t(16,"td")(17,"button",5),E("click",function(){let l=u(e).$implicit,g=D();return c(g.editExpense(l))}),r(18," Editar "),i(),t(19,"button",6),E("click",function(){let l=u(e).$implicit,g=D();return c(g.deleteExpense(l))}),r(20," Eliminar "),i()()()}if(a&2){let e=n.$implicit;d(2),v(e.paymentDate),d(2),v(e.customName),d(2),v(e.expenseTypeName),d(2),v(e.expenseTypeCategory),d(2),v(k(11,7,e.amount)),d(3),v(e.paymentMethodName),d(2),v(e.detail)}}var Ce=class a{constructor(n,e,o,l){this.route=n;this.budgetsService=e;this.dailyExpenseStateService=o;this.router=l}dailyExpenses=[];budgetId=null;ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.budgetId&&this.fetchDailyExpenses(this.budgetId)}fetchDailyExpenses(n){this.budgetsService.getDailyExpensesByBudget(n).subscribe({next:e=>{console.log("Gastos diarios obtenidos:",e),this.dailyExpenses=e},error:e=>console.error("Error al obtener gastos diarios",e)})}editExpense(n){this.dailyExpenseStateService.setExpenseData(n),this.router.navigate(["/budgets/daily-expenses/update",n.budgetId,n.expenseBudgetDetailId,n.dailyExpenseRecordId])}deleteExpense(n){confirm("\xBFEst\xE1s seguro de que deseas eliminar este gasto diario?")&&this.budgetsService.deleteDailyExpense(n.budgetId,n.expenseBudgetDetailId,n.dailyExpenseRecordId).subscribe({next:()=>{alert("Gasto diario eliminado con \xE9xito."),this.fetchDailyExpenses(n.budgetId)},error:e=>{console.error("Error al eliminar el gasto diario",e),alert("Ocurri\xF3 un error al eliminar el gasto diario.")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(ae),p(_))};static \u0275cmp=y({type:a,selectors:[["app-daily-expenses-list"]],decls:27,vars:4,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-success",3,"routerLink"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h2"),r(2,"Gastos Diarios"),i(),t(3,"div",1)(4,"button",2),r(5," + Agregar Gasto Diario "),i()(),t(6,"table",3)(7,"thead")(8,"tr")(9,"th"),r(10,"Fecha de Pago"),i(),t(11,"th"),r(12,"Nombre"),i(),t(13,"th"),r(14,"Tipo"),i(),t(15,"th"),r(16,"Categoria"),i(),t(17,"th"),r(18,"Valor"),i(),t(19,"th"),r(20,"M\xE9todo de Pago"),i(),t(21,"th"),r(22,"Detalle"),i(),t(23,"th"),r(24,"Acciones"),i()()(),t(25,"tbody"),I(26,lt,21,9,"tr",4),i()()()),e&2&&(d(4),m("routerLink",U(2,dt,o.budgetId)),d(22),m("ngForOf",o.dailyExpenses))},dependencies:[R,ee,te]})};function mt(a,n){if(a&1&&(t(0,"option",18),r(1),i()),a&2){let e=n.$implicit;m("value",e.expenseBudgetDetailId),d(),H(" ",e.customName," (",e.expenseTypeName,") ")}}function ut(a,n){if(a&1&&(t(0,"option",18),r(1),i()),a&2){let e=n.$implicit;m("value",e.id),d(),H(" ",e.name," (",e.category,") ")}}function ct(a,n){if(a&1&&(t(0,"option",18),r(1),i()),a&2){let e=n.$implicit;m("value",e.paymentMethodId),d(),K(" ",e.name," ")}}var _e=class a{constructor(n,e,o,l,g){this.route=n;this.budgetsService=e;this.paymentMethodService=o;this.expenseTypeService=l;this.router=g}budgetId=null;dailyExpenseData={expenseBudgetDetailId:0,paymentDate:"",expenseTypeId:null,amount:0,paymentMethodId:0,detail:""};paymentMethods=[];expenseDetails=[];expenseTypes=[];ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.budgetId&&(this.fetchExpenseDetails(this.budgetId),this.fetchPaymentMethods(),this.fetchExpenseTypes())}fetchExpenseDetails(n){this.budgetsService.getExpensesByBudget(n).subscribe({next:e=>this.expenseDetails=e,error:e=>console.error("Error al obtener detalles del presupuesto",e)})}fetchPaymentMethods(){this.paymentMethodService.getPaymentMethods().subscribe({next:n=>this.paymentMethods=n,error:n=>console.error("Error al obtener m\xE9todos de pago",n)})}fetchExpenseTypes(){this.expenseTypeService.getExpenseTypes().subscribe({next:n=>this.expenseTypes=n,error:n=>console.error("Error al obtener tipos de gastos",n)})}addDailyExpense(){if(!this.budgetId)return;let n=J(L({},this.dailyExpenseData),{budgetId:this.budgetId});this.budgetsService.addDailyExpense(n).subscribe({next:()=>{alert("Gasto diario agregado con \xE9xito"),this.router.navigate([`/budgets/daily-expenses/${this.budgetId}`])},error:e=>{console.error("Error al agregar el gasto diario",e),alert("Ocurri\xF3 un error al agregar el gasto diario")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(x),p(ue),p(re),p(_))};static \u0275cmp=y({type:a,selectors:[["app-add-daily-expense"]],decls:34,vars:10,consts:[["dailyExpenseForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","expenseBudgetDetailId",1,"form-label"],["id","expenseBudgetDetailId","name","expenseBudgetDetailId","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","expenseTypeId",1,"form-label"],["id","expenseTypeId","name","expenseTypeId",1,"form-control",3,"ngModelChange","ngModel"],["for","paymentDate",1,"form-label"],["type","date","id","paymentDate","name","paymentDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","amount",1,"form-label"],["type","number","id","amount","name","amount","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","paymentMethodId",1,"form-label"],["id","paymentMethodId","name","paymentMethodId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","detail",1,"form-label"],["id","detail","name","detail","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Agregar Gasto Diario"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.addDailyExpense())}),t(5,"div",3)(6,"label",4),r(7,"Gasto Relacionado al Presupuesto"),i(),t(8,"select",5),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.expenseBudgetDetailId,s)||(o.dailyExpenseData.expenseBudgetDetailId=s),c(s)}),I(9,mt,2,3,"option",6),i()(),t(10,"div",3)(11,"label",7),r(12,"\xBFdesea especificar el tipo de gasto?"),i(),t(13,"select",8),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.expenseTypeId,s)||(o.dailyExpenseData.expenseTypeId=s),c(s)}),I(14,ut,2,3,"option",6),i()(),t(15,"div",3)(16,"label",9),r(17,"Fecha de Pago"),i(),t(18,"input",10),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.paymentDate,s)||(o.dailyExpenseData.paymentDate=s),c(s)}),i()(),t(19,"div",3)(20,"label",11),r(21,"Monto"),i(),t(22,"input",12),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.amount,s)||(o.dailyExpenseData.amount=s),c(s)}),i()(),t(23,"div",3)(24,"label",13),r(25,"M\xE9todo de Pago"),i(),t(26,"select",14),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.paymentMethodId,s)||(o.dailyExpenseData.paymentMethodId=s),c(s)}),I(27,ct,2,2,"option",6),i()(),t(28,"div",3)(29,"label",15),r(30,"Detalle"),i(),t(31,"textarea",16),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.detail,s)||(o.dailyExpenseData.detail=s),c(s)}),i()(),t(32,"button",17),r(33," Agregar Gasto Diario "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.dailyExpenseData.expenseBudgetDetailId),d(),m("ngForOf",o.expenseDetails),d(4),f("ngModel",o.dailyExpenseData.expenseTypeId),d(),m("ngForOf",o.expenseTypes),d(4),f("ngModel",o.dailyExpenseData.paymentDate),d(4),f("ngModel",o.dailyExpenseData.amount),d(4),f("ngModel",o.dailyExpenseData.paymentMethodId),d(),m("ngForOf",o.paymentMethods),d(4),f("ngModel",o.dailyExpenseData.detail),d(),m("disabled",!l.valid)}},dependencies:[R,A,Z,$,w,F,X,B,T,P,V,N]})};function gt(a,n){if(a&1&&(t(0,"option",16),r(1),i()),a&2){let e=n.$implicit;m("value",e.expenseBudgetDetailId),d(),H(" ",e.customName," (",e.expenseTypeName,") ")}}function ft(a,n){if(a&1&&(t(0,"option",16),r(1),i()),a&2){let e=n.$implicit;m("value",e.paymentMethodId),d(),K(" ",e.name," ")}}var De=class a{constructor(n,e,o,l,g){this.route=n;this.paymentMethodService=e;this.budgetsService=o;this.dailyExpenseStateService=l;this.router=g}budgetId=null;expenseBudgetDetailId=null;dailyExpenseRecordId=null;dailyExpenseData={expenseBudgetDetailId:0,paymentDate:"",amount:0,paymentMethodId:0,detail:""};paymentMethods=[];expenseDetails=[];ngOnInit(){this.budgetId=this.route.snapshot.paramMap.get("budgetId"),this.expenseBudgetDetailId=Number(this.route.snapshot.paramMap.get("expenseBudgetDetailId")),this.dailyExpenseRecordId=Number(this.route.snapshot.paramMap.get("dailyExpenseRecordId"));let n=this.dailyExpenseStateService.getExpenseData();n?(this.dailyExpenseData=L({},n),console.log("Datos del gasto diario asignados:",this.dailyExpenseData)):console.error("No se recibi\xF3 el estado con los datos del gasto diario."),this.dailyExpenseStateService.clearExpenseData(),this.fetchPaymentMethods(),this.budgetId&&this.fetchExpenseDetails(this.budgetId)}fetchPaymentMethods(){this.paymentMethodService.getPaymentMethods().subscribe({next:n=>this.paymentMethods=n,error:n=>console.error("Error al obtener m\xE9todos de pago",n)})}fetchExpenseDetails(n){this.budgetsService.getExpensesByBudget(n).subscribe({next:e=>this.expenseDetails=e,error:e=>console.error("Error al obtener detalles del presupuesto",e)})}updateDailyExpense(){if(!this.budgetId||!this.expenseBudgetDetailId||!this.dailyExpenseRecordId)return;let n=L({},this.dailyExpenseData);this.budgetsService.updateDailyExpense(this.budgetId,this.expenseBudgetDetailId,this.dailyExpenseRecordId,n).subscribe({next:()=>{alert("Gasto diario actualizado con \xE9xito"),this.router.navigate([`/budgets/daily-expenses/${this.budgetId}`])},error:e=>{console.error("Error al actualizar el gasto diario",e),alert("Ocurri\xF3 un error al actualizar el gasto diario")}})}static \u0275fac=function(e){return new(e||a)(p(C),p(ue),p(x),p(ae),p(_))};static \u0275cmp=y({type:a,selectors:[["app-update-daily-expense"]],decls:29,vars:8,consts:[["dailyExpenseForm","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],[1,"mb-3"],["for","expenseBudgetDetailId",1,"form-label"],["id","expenseBudgetDetailId","name","expenseBudgetDetailId","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","paymentDate",1,"form-label"],["type","date","id","paymentDate","name","paymentDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","amount",1,"form-label"],["type","number","id","amount","name","amount","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","paymentMethodId",1,"form-label"],["id","paymentMethodId","name","paymentMethodId","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","detail",1,"form-label"],["id","detail","name","detail","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"]],template:function(e,o){if(e&1){let l=S();t(0,"div",1)(1,"h2"),r(2,"Actualizar Gasto Diario"),i(),t(3,"form",2,0),E("ngSubmit",function(){return u(l),c(o.updateDailyExpense())}),t(5,"div",3)(6,"label",4),r(7,"Tipo de Gasto Relacionado"),i(),t(8,"select",5),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.expenseBudgetDetailId,s)||(o.dailyExpenseData.expenseBudgetDetailId=s),c(s)}),I(9,gt,2,3,"option",6),i()(),t(10,"div",3)(11,"label",7),r(12,"Fecha de Pago"),i(),t(13,"input",8),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.paymentDate,s)||(o.dailyExpenseData.paymentDate=s),c(s)}),i()(),t(14,"div",3)(15,"label",9),r(16,"Monto"),i(),t(17,"input",10),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.amount,s)||(o.dailyExpenseData.amount=s),c(s)}),i()(),t(18,"div",3)(19,"label",11),r(20,"M\xE9todo de Pago"),i(),t(21,"select",12),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.paymentMethodId,s)||(o.dailyExpenseData.paymentMethodId=s),c(s)}),I(22,ft,2,2,"option",6),i()(),t(23,"div",3)(24,"label",13),r(25,"Detalle"),i(),t(26,"textarea",14),h("ngModelChange",function(s){return u(l),b(o.dailyExpenseData.detail,s)||(o.dailyExpenseData.detail=s),c(s)}),i()(),t(27,"button",15),r(28," Actualizar Gasto Diario "),i()()()}if(e&2){let l=M(4);d(8),f("ngModel",o.dailyExpenseData.expenseBudgetDetailId),d(),m("ngForOf",o.expenseDetails),d(4),f("ngModel",o.dailyExpenseData.paymentDate),d(4),f("ngModel",o.dailyExpenseData.amount),d(4),f("ngModel",o.dailyExpenseData.paymentMethodId),d(),m("ngForOf",o.paymentMethods),d(4),f("ngModel",o.dailyExpenseData.detail),d(),m("disabled",!l.valid)}},dependencies:[R,A,Z,$,w,F,X,B,T,P,V,N]})};function ht(a,n){a&1&&(t(0,"div",2)(1,"p"),r(2,"Cargando datos..."),i()())}function yt(a,n){if(a&1&&(t(0,"div",3),pe(1,"canvas",4),i()),a&2){let e=D();d(),m("data",e.chartData)("labels",e.chartData.labels)("options",e.chartOptions)("type",e.chartType)}}function xt(a,n){a&1&&(t(0,"div",2)(1,"p"),r(2,"No hay datos disponibles para mostrar."),i()())}var Me=class a{constructor(n,e){this.budgetsService=n;this.authService=e}chartOptions={responsive:!0,maintainAspectRatio:!1};chartType="line";chartData={labels:[],datasets:[]};isLoading=!0;userId="";ngOnInit(){this.userId=this.authService.getUserIdFromToken(),this.userId?this.fetchBudgetData():console.error("No se pudo obtener el usuario del token.","Error")}fetchBudgetData(){this.userId&&this.budgetsService.getBudgetsByUser(this.userId).subscribe(n=>{n.length>0?(this.chartData.labels=n.map(e=>`${e.month}/${e.year}`),this.chartData.datasets=[{data:n.map(e=>e.totalIncome),label:"Ingresos",borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0},{data:n.map(e=>e.totalExpenses),label:"Gastos",borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!0}]):console.error("No se recibieron datos del servidor."),this.isLoading=!1},n=>{console.error("Error al obtener los datos del servidor:",n),this.isLoading=!1})}static \u0275fac=function(e){return new(e||a)(p(x),p(G))};static \u0275cmp=y({type:a,selectors:[["app-income-expense-trends"]],decls:3,vars:3,consts:[["class","text-center",4,"ngIf"],["class","chart-container","style","display: block; height: 400px;",4,"ngIf"],[1,"text-center"],[1,"chart-container",2,"display","block","height","400px"],["baseChart","",3,"data","labels","options","type"]],template:function(e,o){e&1&&I(0,ht,3,0,"div",0)(1,yt,2,4,"div",1)(2,xt,3,0,"div",0),e&2&&(m("ngIf",o.isLoading),d(),m("ngIf",!o.isLoading&&o.chartData.datasets.length>0),d(),m("ngIf",!o.isLoading&&o.chartData.datasets.length===0))},dependencies:[Q,ce]})};function vt(a,n){a&1&&(t(0,"div",2)(1,"p"),r(2,"Cargando datos..."),i()())}function It(a,n){if(a&1&&(t(0,"div",3),pe(1,"canvas",4),i()),a&2){let e=D();d(),m("data",e.chartData)("labels",e.chartData.labels)("options",e.chartOptions)("type",e.chartType)}}function Et(a,n){a&1&&(t(0,"div",2)(1,"p"),r(2,"No hay datos disponibles para mostrar."),i()())}var we=class a{constructor(n,e){this.budgetsService=n;this.authService=e}chartOptions={responsive:!0,maintainAspectRatio:!1};chartType="bar";chartData={labels:[],datasets:[]};userId="";isLoading=!0;ngOnInit(){this.userId=this.authService.getUserIdFromToken(),this.userId?this.processData():console.error("No se pudo obtener el usuario del token.","Error")}processData(){this.userId&&this.budgetsService.getBudgetsByUser(this.userId).subscribe(n=>{n.length>0?(this.chartData.labels=n.map(e=>`${e.month}/${e.year}`),this.chartData.datasets=[{data:n.map(e=>e.nonBudgetedExpenses),label:"Gastos No Presupuestados",backgroundColor:"rgba(255, 159, 64, 0.6)"}]):console.error("No se recibieron datos del servidor."),this.isLoading=!1},n=>{console.error("Error al obtener los datos del servidor:",n),this.isLoading=!1})}static \u0275fac=function(e){return new(e||a)(p(x),p(G))};static \u0275cmp=y({type:a,selectors:[["app-non-budgeted-expenses"]],decls:3,vars:3,consts:[["class","text-center",4,"ngIf"],["class","chart-container","style","display: block; height: 400px;",4,"ngIf"],[1,"text-center"],[1,"chart-container",2,"display","block","height","400px"],["baseChart","",3,"data","labels","options","type"]],template:function(e,o){e&1&&I(0,vt,3,0,"div",0)(1,It,2,4,"div",1)(2,Et,3,0,"div",0),e&2&&(m("ngIf",o.isLoading),d(),m("ngIf",!o.isLoading&&o.chartData.datasets.length>0),d(),m("ngIf",!o.isLoading&&o.chartData.datasets.length===0))},dependencies:[Q,ce]})};var St=[{path:"",component:ge},{path:"create",component:fe},{path:"clone/:budgetId",component:be},{path:"update/:budgetId",component:he},{path:"expenses/:budgetId",component:ye},{path:"expenses/add/:budgetId",component:xe},{path:"expenses/update/:budgetId/:expenseId",component:ve},{path:"incomes/:budgetId",component:Ie},{path:"incomes/add/:budgetId",component:Ee},{path:"incomes/update/:budgetId/:incomeId",component:Se},{path:"daily-expenses/:budgetId",component:Ce},{path:"daily-expenses/add/:budgetId",component:_e},{path:"daily-expenses/update/:budgetId/:expenseBudgetDetailId/:dailyExpenseRecordId",component:De},{path:"charts/plan-vs-executed",component:Le},{path:"charts/expense-distribution",component:We},{path:"charts/income-expense-trends",component:Me},{path:"charts/non-budgeted-expenses",component:we},{path:"charts/payment-status",component:ke}],Be=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=le({type:a});static \u0275inj=de({imports:[Te.forChild(St),Te]})};var Ge=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=le({type:a});static \u0275inj=de({imports:[Ae,Be,Oe,Pe,je,Re]})};export{Ge as BudgetsModule};
