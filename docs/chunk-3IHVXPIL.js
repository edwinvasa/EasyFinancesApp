import{$ as te,A as p,B as c,C as d,D as E,E as h,G as K,J as w,K as Q,N as X,O as F,S as Z,T as N,U as k,V as $,W as ee,X as R,Y as ne,a as _,aa as ie,b as v,ba as oe,c as M,d as A,da as se,e as b,f as I,fa as P,g as T,ga as re,h as L,i as m,j as S,k as y,ka as D,l as u,la as ae,m as o,ma as me,n,na as le,o as q,p as z,q as G,r as B,s as f,t as g,u as H,v as a,w as J,x,y as U}from"./chunk-6OQHB22I.js";var W=class i{constructor(s){this.http=s}apiUrl="https://easy-finances-app-63cef07822fc.herokuapp.com/api/economic-analysis";analyzeEconomicCapacity(s){return this.http.post(this.apiUrl,s)}static \u0275fac=function(e){return new(e||i)(M(F))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};var Y=class i{constructor(s){this.http=s}apiUrl="https://easy-finances-app-63cef07822fc.herokuapp.com/api/expense-types";getExpenseTypes(){return this.http.get(this.apiUrl)}static \u0275fac=function(e){return new(e||i)(M(F))};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};function Ee(i,s){if(i&1&&(o(0,"option",8),a(1),n()),i&2){let e=s.$implicit;u("value",e.id),m(),U("",e.name," - ",e.category,"")}}var O=class i{constructor(s){this.expenseTypeService=s}onExpenseAdded=new L;expenseTypes=[];selectedExpenseTypeId=null;amount=null;ngOnInit(){this.loadExpenseTypes()}loadExpenseTypes(){this.expenseTypeService.getExpenseTypes().subscribe({next:s=>{this.expenseTypes=s,console.log("Tipos de gastos cargados:",this.expenseTypes)},error:s=>{console.error("Error al cargar tipos de gastos:",s)}})}addExpense(){if(console.log("ID seleccionado:",this.selectedExpenseTypeId),console.log("Monto ingresado:",this.amount),this.selectedExpenseTypeId===null){console.error("Debe seleccionar un tipo de gasto");return}if(this.amount===null||this.amount<=0){console.error("Debe ingresar un monto v\xE1lido");return}let s=Number(this.selectedExpenseTypeId),e=this.expenseTypes.find(t=>t.id===s);console.log("Tipo de gasto seleccionado:",e),e?(this.onExpenseAdded.emit({expenseTypeId:e.id,expenseTypeNameAndCategory:`${e.name} - ${e.category}`,amount:this.amount}),this.resetForm()):console.error("Error al encontrar el tipo de gasto seleccionado")}resetForm(){this.selectedExpenseTypeId=null,this.amount=null}static \u0275fac=function(e){return new(e||i)(S(Y))};static \u0275cmp=A({type:i,selectors:[["app-add-expenses"]],outputs:{onExpenseAdded:"onExpenseAdded"},decls:12,vars:3,consts:[[1,"mb-3"],["for","expenseType",1,"form-label"],["id","expenseType","name","expenseType",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","amount",1,"form-label"],["type","text","id","amount","currencyMask","","placeholder","Ingrese el monto del gasto",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"label",1),a(2,"Tipo de Gasto"),n(),o(3,"select",2),d("ngModelChange",function(r){return c(t.selectedExpenseTypeId,r)||(t.selectedExpenseTypeId=r),r}),y(4,Ee,2,3,"option",3),n()(),o(5,"div",0)(6,"label",4),a(7,"Monto del Gasto"),n(),o(8,"input",5),d("ngModelChange",function(r){return c(t.amount,r)||(t.amount=r),r}),n()(),o(9,"div",6)(10,"button",7),f("click",function(){return t.addExpense()}),a(11,"Agregar Gasto"),n()()),e&2&&(m(3),p("ngModel",t.selectedExpenseTypeId),m(),u("ngForOf",t.expenseTypes),m(4),p("ngModel",t.amount))},dependencies:[w,ie,oe,N,te,k,R,P]})};function Ce(i,s){if(i&1){let e=B();o(0,"input",25),d("ngModelChange",function(l){I(e);let r=g();return c(r.christmasBonusAmount,l)||(r.christmasBonusAmount=l),T(l)}),n()}if(i&2){let e=g();p("ngModel",e.christmasBonusAmount)}}function _e(i,s){if(i&1){let e=B();o(0,"input",26),d("ngModelChange",function(l){I(e);let r=g();return c(r.midYearBonusAmount,l)||(r.midYearBonusAmount=l),T(l)}),n()}if(i&2){let e=g();p("ngModel",e.midYearBonusAmount)}}function ve(i,s){if(i&1){let e=B();o(0,"tr")(1,"td"),a(2),n(),o(3,"td"),a(4),E(5,"customCurrency"),n(),o(6,"td")(7,"button",27),f("click",function(){let l=I(e).index,r=g();return T(r.removeExpense(l))}),a(8,"Eliminar"),n()()()}if(i&2){let e=s.$implicit;m(2),J(e.expenseTypeNameAndCategory),m(2),x("",h(5,2,e.amount)," ")}}function Me(i,s){if(i&1&&(z(0),o(1,"p")(2,"strong"),a(3,"Monto Sugerido para Pago:"),n(),a(4),E(5,"customCurrency"),n(),G()),i&2){let e=g(2);m(4),x(" ",h(5,1,e.analysisResult.suggestedPaymentAmount),"")}}function Ae(i,s){i&1&&(o(0,"div",30)(1,"strong"),a(2,"Atenci\xF3n:"),n(),a(3," No es posible generar un monto sugerido para pago, ya que tus gastos actuales superan significativamente tus ingresos. "),n())}function be(i,s){if(i&1&&(o(0,"div",28)(1,"h4"),a(2,"Resultado del An\xE1lisis"),n(),o(3,"p")(4,"strong"),a(5,"Ingresos Mensuales:"),n(),a(6),E(7,"customCurrency"),n(),o(8,"p")(9,"strong"),a(10,"Ingresos Adicionales:"),n(),a(11),E(12,"customCurrency"),n(),o(13,"p")(14,"strong"),a(15,"Gastos Totales:"),n(),a(16),E(17,"customCurrency"),n(),y(18,Me,6,3,"ng-container",29)(19,Ae,4,0,"ng-template",null,0,K),n()),i&2){let e=H(20),t=g();m(6),x(" ",h(7,5,t.analysisResult.monthlyIncome),""),m(5),x(" ",h(12,7,t.analysisResult.additionalIncome),""),m(5),x(" ",h(17,9,t.analysisResult.totalExpenses),""),m(2),u("ngIf",t.analysisResult.suggestedPaymentAmount>=0)("ngIfElse",e)}}var j=class i{constructor(s){this.economicAnalysisService=s}monthlyIncome=0;additionalIncome=0;receivesChristmasBonus=!1;receivesMidYearBonus=!1;christmasBonusAmount=0;midYearBonusAmount=0;expenses=[];analysisResult;addExpense(s){this.expenses.push(s)}removeExpense(s){this.expenses.splice(s,1)}analyzeEconomicCapacity(){if(this.expenses.length===0)return;let s=this.expenses.map(t=>({expenseTypeId:t.expenseTypeId,amount:t.amount})),e={userId:ae(),monthlyIncome:this.monthlyIncome,additionalIncome:this.additionalIncome,expenses:s,receivesChristmasBonus:this.receivesChristmasBonus,receivesMidYearBonus:this.receivesMidYearBonus,christmasBonusAmount:this.receivesChristmasBonus?this.christmasBonusAmount:0,midYearBonusAmount:this.receivesMidYearBonus?this.midYearBonusAmount:0};this.economicAnalysisService.analyzeEconomicCapacity(e).subscribe({next:t=>{this.analysisResult=t},error:t=>{console.error("Error al analizar la capacidad econ\xF3mica:",t)}})}static \u0275fac=function(e){return new(e||i)(S(W))};static \u0275cmp=A({type:i,selectors:[["app-economic-analysis-form"]],decls:49,vars:8,consts:[["negativeAmountMessage",""],[1,"container","mt-3"],[3,"ngSubmit"],[1,"d-flex","justify-content-center"],[1,"w-auto","p-3"],[1,"row","mb-3"],[1,"col"],["for","monthlyIncome",1,"form-label"],["type","text","id","monthlyIncome","name","monthlyIncome","currencyMask","","placeholder","Ej: 5.000.000",1,"form-control",3,"ngModelChange","ngModel"],["for","additionalIncome",1,"form-label"],["type","text","id","additionalIncome","name","additionalIncome","currencyMask","","placeholder","Ej: 500.000",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"form-check"],["type","checkbox","name","receivesChristmasBonus","id","christmasBonus",1,"form-check-input",3,"ngModelChange","ngModel"],["for","christmasBonus",1,"form-check-label"],["type","text","name","christmasBonusAmount","class","form-control mt-2","currencyMask","","placeholder","Cantidad Prima de Navidad",3,"ngModel","ngModelChange",4,"ngIf"],["type","checkbox","name","receivesMidYearBonus","id","midYearBonus",1,"form-check-input",3,"ngModelChange","ngModel"],["for","midYearBonus",1,"form-check-label"],["type","text","name","midYearBonusAmount","class","form-control mt-2","currencyMask","","placeholder","Cantidad Prima de Junio",3,"ngModel","ngModelChange",4,"ngIf"],[3,"onExpenseAdded"],[1,"table","table-bordered","mt-3"],[4,"ngFor","ngForOf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],["class","mt-4",4,"ngIf"],["type","text","name","christmasBonusAmount","currencyMask","","placeholder","Cantidad Prima de Navidad",1,"form-control","mt-2",3,"ngModelChange","ngModel"],["type","text","name","midYearBonusAmount","currencyMask","","placeholder","Cantidad Prima de Junio",1,"form-control","mt-2",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-danger",3,"click"],[1,"mt-4"],[4,"ngIf","ngIfElse"],[1,"alert","alert-warning","mt-3"]],template:function(e,t){e&1&&(o(0,"div",1)(1,"h5"),a(2,"An\xE1lisis de Capacidad de Pago"),n(),q(3,"hr"),o(4,"form",2),f("ngSubmit",function(){return t.analyzeEconomicCapacity()}),o(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"label",7),a(10,"Ingresos Mensuales"),n(),o(11,"input",8),d("ngModelChange",function(r){return c(t.monthlyIncome,r)||(t.monthlyIncome=r),r}),n()(),o(12,"div",6)(13,"label",9),a(14,"Otros Ingresos"),n(),o(15,"input",10),d("ngModelChange",function(r){return c(t.additionalIncome,r)||(t.additionalIncome=r),r}),n()()(),o(16,"div",5)(17,"div",6)(18,"label",11),a(19,"Prima de Navidad"),n(),o(20,"div",12)(21,"input",13),d("ngModelChange",function(r){return c(t.receivesChristmasBonus,r)||(t.receivesChristmasBonus=r),r}),n(),o(22,"label",14),a(23,"Recibo Prima de Navidad"),n()(),y(24,Ce,1,1,"input",15),n(),o(25,"div",6)(26,"label",11),a(27,"Prima de Junio"),n(),o(28,"div",12)(29,"input",16),d("ngModelChange",function(r){return c(t.receivesMidYearBonus,r)||(t.receivesMidYearBonus=r),r}),n(),o(30,"label",17),a(31,"Recibo Prima de Junio"),n()(),y(32,_e,1,1,"input",18),n()(),o(33,"app-add-expenses",19),f("onExpenseAdded",function(r){return t.addExpense(r)}),n(),o(34,"table",20)(35,"thead")(36,"tr")(37,"th"),a(38,"Tipo de Gasto"),n(),o(39,"th"),a(40,"Monto"),n(),o(41,"th"),a(42,"Acci\xF3n"),n()()(),o(43,"tbody"),y(44,ve,9,4,"tr",21),n()(),o(45,"div",22)(46,"button",23),a(47,"Analizar Capacidad de Pago"),n()()()()(),y(48,be,21,11,"div",24),n()),e&2&&(m(11),p("ngModel",t.monthlyIncome),m(4),p("ngModel",t.additionalIncome),m(6),p("ngModel",t.receivesChristmasBonus),m(3),u("ngIf",t.receivesChristmasBonus),m(5),p("ngModel",t.receivesMidYearBonus),m(3),u("ngIf",t.receivesMidYearBonus),m(12),u("ngForOf",t.expenses),m(4),u("ngIf",t.analysisResult))},dependencies:[w,Q,ne,N,Z,k,$,R,ee,P,O,me],encapsulation:2})};var Ie=[{path:"",component:j}],V=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=b({type:i});static \u0275inj=v({imports:[D.forChild(Ie),D]})};var pe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=b({type:i});static \u0275inj=v({imports:[X,V,se,re,le]})};export{pe as a};
