import{A as g,B as y,C as f,E as C,F as _,H as Q,L as k,M as X,P as Z,Q as N,U as $,V as P,W as V,X as ee,Y as te,Z as R,_ as ne,a as A,b as I,ba as ie,c as S,ca as oe,d as T,da as se,e as w,ea as re,f as p,g as d,ga as ae,h as H,i as m,ia as W,j as B,ja as me,k as x,l as u,m as i,n as e,na as G,o as F,oa as le,p as J,pa as ce,q as U,qa as pe,r as v,s as h,t as E,u as z,v as s,w as L,x as b,y as K}from"./chunk-AX6OQGLD.js";var O=class o{constructor(r){this.http=r}apiUrl="https://easy-finances-app-63cef07822fc.herokuapp.com/api/economic-analysis";analyzeEconomicCapacity(r){return this.http.post(this.apiUrl,r)}static \u0275fac=function(t){return new(t||o)(S(N))};static \u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"})};var Y=class o{constructor(r){this.http=r}apiUrl="https://easy-finances-app-63cef07822fc.herokuapp.com/api/expense-types";getExpenseTypes(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||o)(S(N))};static \u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"})};function Ce(o,r){if(o&1&&(i(0,"option",8),s(1),e()),o&2){let t=r.$implicit;u("value",t.id),m(),K("",t.name," - ",t.category,"")}}var j=class o{constructor(r){this.expenseTypeService=r}onExpenseAdded=new H;expenseTypes=[];selectedExpenseTypeId=null;amount=null;ngOnInit(){this.loadExpenseTypes()}loadExpenseTypes(){this.expenseTypeService.getExpenseTypes().subscribe({next:r=>{this.expenseTypes=r,console.log("Tipos de gastos cargados:",this.expenseTypes)},error:r=>{console.error("Error al cargar tipos de gastos:",r)}})}addExpense(){if(console.log("ID seleccionado:",this.selectedExpenseTypeId),console.log("Monto ingresado:",this.amount),this.selectedExpenseTypeId===null){console.error("Debe seleccionar un tipo de gasto");return}if(this.amount===null||this.amount<=0){console.error("Debe ingresar un monto v\xE1lido");return}let r=Number(this.selectedExpenseTypeId),t=this.expenseTypes.find(n=>n.id===r);console.log("Tipo de gasto seleccionado:",t),t?(this.onExpenseAdded.emit({expenseTypeId:t.id,expenseTypeNameAndCategory:`${t.name} - ${t.category}`,amount:this.amount}),this.resetForm()):console.error("Error al encontrar el tipo de gasto seleccionado")}resetForm(){this.selectedExpenseTypeId=null,this.amount=null}static \u0275fac=function(t){return new(t||o)(B(Y))};static \u0275cmp=T({type:o,selectors:[["app-add-expenses"]],outputs:{onExpenseAdded:"onExpenseAdded"},decls:12,vars:3,consts:[[1,"mb-3"],["for","expenseType",1,"form-label"],["id","expenseType","name","expenseType",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","amount",1,"form-label"],["type","text","id","amount","currencyMask","","placeholder","Ingrese el monto del gasto","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"label",1),s(2,"Tipo de Gasto"),e(),i(3,"select",2),f("ngModelChange",function(l){return y(n.selectedExpenseTypeId,l)||(n.selectedExpenseTypeId=l),l}),x(4,Ce,2,3,"option",3),e()(),i(5,"div",0)(6,"label",4),s(7,"Monto del Gasto"),e(),i(8,"input",5),f("ngModelChange",function(l){return y(n.amount,l)||(n.amount=l),l}),e()(),i(9,"div",6)(10,"button",7),h("click",function(){return n.addExpense()}),s(11,"Agregar Gasto"),e()()),t&2&&(m(3),g("ngModel",n.selectedExpenseTypeId),m(),u("ngForOf",n.expenseTypes),m(4),g("ngModel",n.amount))},dependencies:[k,oe,se,P,ie,V,R,W],styles:[".container[_ngcontent-%COMP%]{max-width:80%;margin:0 auto;padding:20px}.mb-3[_ngcontent-%COMP%]{margin-bottom:20px}button[_ngcontent-%COMP%]{width:100%;font-size:1.1rem;padding:10px;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#ff7043}"]})};function ve(o,r){o&1&&(i(0,"div",32),s(1," Ingresos mensuales son obligatorios. "),e())}function be(o,r){if(o&1){let t=v();i(0,"input",33),f("ngModelChange",function(a){p(t);let l=E();return y(l.christmasBonusAmount,a)||(l.christmasBonusAmount=a),d(a)}),e()}if(o&2){let t=E();g("ngModel",t.christmasBonusAmount)}}function Me(o,r){if(o&1){let t=v();i(0,"input",34),f("ngModelChange",function(a){p(t);let l=E();return y(l.midYearBonusAmount,a)||(l.midYearBonusAmount=a),d(a)}),e()}if(o&2){let t=E();g("ngModel",t.midYearBonusAmount)}}function Ae(o,r){if(o&1){let t=v();i(0,"tr")(1,"td"),s(2),e(),i(3,"td"),s(4),C(5,"customCurrency"),e(),i(6,"td")(7,"button",35),h("click",function(){let a=p(t).index,l=E();return d(l.removeExpense(a))}),s(8,"Eliminar"),e()()()}if(o&2){let t=r.$implicit;m(2),L(t.expenseTypeNameAndCategory),m(2),L(_(5,2,t.amount))}}function Ie(o,r){if(o&1&&(J(0),i(1,"p")(2,"strong"),s(3,"Monto Sugerido para Pago:"),e(),s(4),C(5,"customCurrency"),e(),i(6,"p",39),s(7," Aunque el monto sugerido puede parecer bajo, realizar peque\xF1os abonos a capital, incluso de $20.000 pesos, impactar\xE1 significativamente en la reducci\xF3n del tiempo y de los intereses de tu cr\xE9dito. "),e(),U()),o&2){let t=E(2);m(4),b(" ",_(5,1,t.analysisResult.suggestedPaymentAmount),"")}}function Se(o,r){o&1&&(i(0,"div",40)(1,"strong"),s(2,"Atenci\xF3n:"),e(),s(3," Tus gastos actuales superan tus ingresos, lo que hace dif\xEDcil generar un monto sugerido para pago. Considera reducir gastos para mejorar tu capacidad de pago. "),e())}function Te(o,r){if(o&1&&(i(0,"div",36)(1,"h4",29),s(2,"Resultado del An\xE1lisis"),e(),i(3,"div",37)(4,"p")(5,"strong"),s(6,"Ingresos Mensuales:"),e(),s(7),C(8,"customCurrency"),e(),i(9,"p")(10,"strong"),s(11,"Ingresos Adicionales:"),e(),s(12),C(13,"customCurrency"),e(),i(14,"p")(15,"strong"),s(16,"Gastos Totales:"),e(),s(17),C(18,"customCurrency"),e(),x(19,Ie,8,3,"ng-container",38)(20,Se,4,0,"ng-template",null,1,Q),e()()),o&2){let t=z(21),n=E();m(7),b(" ",_(8,5,n.analysisResult.monthlyIncome),""),m(5),b(" ",_(13,7,n.analysisResult.additionalIncome),""),m(5),b(" ",_(18,9,n.analysisResult.totalExpenses),""),m(2),u("ngIf",n.analysisResult.suggestedPaymentAmount>=0)("ngIfElse",t)}}var D=class o{constructor(r){this.economicAnalysisService=r}monthlyIncome=0;additionalIncome=0;receivesChristmasBonus=!1;receivesMidYearBonus=!1;christmasBonusAmount=0;midYearBonusAmount=0;expenses=[];analysisResult;addExpense(r){this.expenses.push(r)}removeExpense(r){this.expenses.splice(r,1)}analyzeEconomicCapacity(){if(this.expenses.length===0)return;let r=this.expenses.map(n=>({expenseTypeId:n.expenseTypeId,amount:n.amount})),t={userId:le(),monthlyIncome:this.monthlyIncome,additionalIncome:this.additionalIncome,expenses:r,receivesChristmasBonus:this.receivesChristmasBonus,receivesMidYearBonus:this.receivesMidYearBonus,christmasBonusAmount:this.receivesChristmasBonus?this.christmasBonusAmount:0,midYearBonusAmount:this.receivesMidYearBonus?this.midYearBonusAmount:0};this.economicAnalysisService.analyzeEconomicCapacity(t).subscribe({next:n=>{this.analysisResult=n},error:n=>{console.error("Error al analizar la capacidad econ\xF3mica:",n)}})}static \u0275fac=function(t){return new(t||o)(B(O))};static \u0275cmp=T({type:o,selectors:[["app-economic-analysis-form"]],decls:67,vars:9,consts:[["monthlyIncomeModel","ngModel"],["negativeAmountMessage",""],[1,"container","mt-3"],[1,"intro-section","bg-light","text-center","p-4","rounded","shadow-sm","mb-4"],[1,"text-primary","mb-3"],[1,"lead","text-muted"],[1,"expenses-guide-section","bg-info","text-white","text-center","p-3","rounded","shadow-sm","mb-4"],[1,"mb-0"],["autocomplete","off",3,"ngSubmit"],[1,"d-flex","justify-content-center"],[1,"w-auto","p-3"],[1,"row","mb-3"],[1,"col"],["for","monthlyIncome",1,"form-label"],["type","text","id","monthlyIncome","name","monthlyIncome","currencyMask","","placeholder","Ej: 5.000.000","required","","autocomplete","off",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],["for","additionalIncome",1,"form-label"],["type","text","id","additionalIncome","name","additionalIncome","currencyMask","","placeholder","Ej: 500.000",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"form-check"],["type","checkbox","name","receivesChristmasBonus","id","christmasBonus","autocomplete","off",1,"form-check-input",3,"ngModelChange","ngModel"],["for","christmasBonus",1,"form-check-label"],["type","text","name","christmasBonusAmount","class","form-control mt-2","currencyMask","","placeholder","Cantidad Prima de Navidad",3,"ngModel","ngModelChange",4,"ngIf"],["type","checkbox","name","receivesMidYearBonus","id","midYearBonus","autocomplete","off",1,"form-check-input",3,"ngModelChange","ngModel"],["for","midYearBonus",1,"form-check-label"],["type","text","name","midYearBonusAmount","class","form-control mt-2","currencyMask","","placeholder","Cantidad Prima de Junio",3,"ngModel","ngModelChange",4,"ngIf"],[3,"onExpenseAdded"],[1,"table","table-bordered","mt-3"],[4,"ngFor","ngForOf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],["class","analysis-result mt-5",4,"ngIf"],[1,"text-danger"],["type","text","name","christmasBonusAmount","currencyMask","","placeholder","Cantidad Prima de Navidad",1,"form-control","mt-2",3,"ngModelChange","ngModel"],["type","text","name","midYearBonusAmount","currencyMask","","placeholder","Cantidad Prima de Junio",1,"form-control","mt-2",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-danger",3,"click"],[1,"analysis-result","mt-5"],[1,"bg-light","p-4","rounded","shadow-sm","mb-4"],[4,"ngIf","ngIfElse"],[1,"text-success"],[1,"alert","alert-warning","mt-3"]],template:function(t,n){if(t&1){let a=v();i(0,"div",2)(1,"h5"),s(2,"An\xE1lisis de Capacidad de Pago"),e(),F(3,"hr"),i(4,"div",3)(5,"h2",4),s(6,"Analiza tu Capacidad de Pago"),e(),i(7,"p",5),s(8," Conocer tu capacidad de pago es clave para gestionar tus finanzas. Introduce tus ingresos, gastos y descubre cu\xE1nto puedes destinar para el pago de tu cr\xE9dito. "),e()(),i(9,"div",6)(10,"p",7)(11,"strong"),s(12,"Consejo:"),e(),s(13," Puedes ser tan espec\xEDfico como desees al agregar tus gastos. Detalla cada tipo de gasto o agr\xFApalos en categor\xEDas m\xE1s amplias seg\xFAn prefieras. La idea es ayudarte a capturar todos los gastos y no olvidar ninguno. "),e()(),i(14,"form",8),h("ngSubmit",function(){return p(a),d(n.analyzeEconomicCapacity())}),i(15,"div",9)(16,"div",10)(17,"h6"),s(18,"Ingresos"),e(),F(19,"hr"),i(20,"div",11)(21,"div",12)(22,"label",13),s(23,"Ingresos Mensuales"),e(),i(24,"input",14,0),f("ngModelChange",function(c){return p(a),y(n.monthlyIncome,c)||(n.monthlyIncome=c),d(c)}),e(),x(26,ve,2,0,"div",15),e(),i(27,"div",12)(28,"label",16),s(29,"Otros Ingresos"),e(),i(30,"input",17),f("ngModelChange",function(c){return p(a),y(n.additionalIncome,c)||(n.additionalIncome=c),d(c)}),e()()(),i(31,"div",11)(32,"div",12)(33,"label",18),s(34,"Prima de Navidad"),e(),i(35,"div",19)(36,"input",20),f("ngModelChange",function(c){return p(a),y(n.receivesChristmasBonus,c)||(n.receivesChristmasBonus=c),d(c)}),e(),i(37,"label",21),s(38,"Recibo Prima de Navidad"),e()(),x(39,be,1,1,"input",22),e(),i(40,"div",12)(41,"label",18),s(42,"Prima de Junio"),e(),i(43,"div",19)(44,"input",23),f("ngModelChange",function(c){return p(a),y(n.receivesMidYearBonus,c)||(n.receivesMidYearBonus=c),d(c)}),e(),i(45,"label",24),s(46,"Recibo Prima de Junio"),e()(),x(47,Me,1,1,"input",25),e()(),i(48,"h6"),s(49,"Gastos"),e(),F(50,"hr"),i(51,"app-add-expenses",26),h("onExpenseAdded",function(c){return p(a),d(n.addExpense(c))}),e(),i(52,"table",27)(53,"thead")(54,"tr")(55,"th"),s(56,"Tipo de Gasto"),e(),i(57,"th"),s(58,"Monto"),e(),i(59,"th"),s(60,"Acci\xF3n"),e()()(),i(61,"tbody"),x(62,Ae,9,4,"tr",28),e()(),i(63,"div",29)(64,"button",30),s(65,"Analizar Capacidad de Pago"),e()()()()(),x(66,Te,22,11,"div",31),e()}if(t&2){let a=z(25);m(24),g("ngModel",n.monthlyIncome),m(2),u("ngIf",a.invalid&&(a.dirty||a.touched)),m(4),g("ngModel",n.additionalIncome),m(6),g("ngModel",n.receivesChristmasBonus),m(3),u("ngIf",n.receivesChristmasBonus),m(5),g("ngModel",n.receivesMidYearBonus),m(3),u("ngIf",n.receivesMidYearBonus),m(15),u("ngForOf",n.expenses),m(4),u("ngIf",n.analysisResult)}},dependencies:[k,X,ne,P,$,V,ee,re,R,te,W,j,ce],encapsulation:2})};var we=[{path:"",component:D},{path:"**",redirectTo:"economic-analysis"}],q=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=I({imports:[G.forChild(we),G]})};var de=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=I({imports:[Z,q,ae,me,pe]})};export{de as a};
