import{$ as ie,A as f,B as C,C as g,D as I,E as A,J as U,K as v,N as J,O as K,T as Q,U as X,V as Y,W as Z,X as $,Y as ee,Z as te,_ as ne,a as G,aa as oe,b as T,ba as ae,c as q,ca as re,d as b,da as le,e as w,f as R,fa as se,g as z,ga as me,h as V,i as r,ia as pe,j as O,k as c,ka as j,l as p,la as de,m as e,ma as N,n,na as ce,o as y,r as P,s as _,t as d,v as i,w as u,x as E,z as H}from"./chunk-6OQHB22I.js";var W=class o{constructor(s){this.http=s}apiUrl="https://easy-finances-app-63cef07822fc.herokuapp.com/api/loan-analysis";analyzeLoan(s){let t=de(),a=s.abonosCapital==="si"?s.valorAbono:null,m={userId:t,principal:s.monto,rateTypeId:s.tipoTasa==="TEA"?1:2,rate:s.tasa,term:s.plazo,termType:s.tipoPlazo==="Meses"?"months":"years",capitalRepayment:s.abonosCapital==="si",capitalRepaymentAmount:a,capitalRepaymentFrequency:s.frecuenciaAbono||null,startCapitalRepaymentInstallment:s.cuotaInicio||null};return this.http.post(this.apiUrl,m)}static \u0275fac=function(t){return new(t||o)(q(K))};static \u0275prov=G({token:o,factory:o.\u0275fac,providedIn:"root"})};function Ce(o,s){if(o&1){let t=P();e(0,"div",4)(1,"label",33),i(2,"Frecuencia de abonos a capital:"),n(),e(3,"select",34),g("ngModelChange",function(m){R(t);let l=d(2);return C(l.creditInfo.frecuenciaAbono,m)||(l.creditInfo.frecuenciaAbono=m),z(m)}),e(4,"option",35),i(5,"Selecciona la frecuencia de pagos"),n(),e(6,"option",36),i(7,"Mensual"),n(),e(8,"option",37),i(9,"Semestral"),n(),e(10,"option",38),i(11,"Anual"),n(),e(12,"option",39),i(13,"Pago \xFAnico"),n()()()}if(o&2){let t=d(2);r(3),f("ngModel",t.creditInfo.frecuenciaAbono)}}function ge(o,s){if(o&1){let t=P();e(0,"div",4)(1,"label",40),i(2,"\xBFA partir de cu\xE1l cuota desea comenzar a aplicar los abonos a capital?"),n(),e(3,"input",41),g("ngModelChange",function(m){R(t);let l=d(2);return C(l.creditInfo.cuotaInicio,m)||(l.creditInfo.cuotaInicio=m),z(m)}),n()()}if(o&2){let t=d(2);r(3),f("ngModel",t.creditInfo.cuotaInicio)}}function be(o,s){if(o&1){let t=P();e(0,"div")(1,"div",4)(2,"label",30),i(3,"Valor del abono:"),n(),e(4,"input",31),g("ngModelChange",function(m){R(t);let l=d();return C(l.creditInfo.valorAbono,m)||(l.creditInfo.valorAbono=m),z(m)}),n()(),c(5,Ce,14,1,"div",32)(6,ge,4,1,"div",32),n()}if(o&2){let t=d();r(4),f("ngModel",t.creditInfo.valorAbono),r(),p("ngIf",t.creditInfo.valorAbono),r(),p("ngIf",t.creditInfo.frecuenciaAbono)}}var S=class o{onSubmitCreditInfo=new V;creditInfo={monto:null,tipoTasa:"TEA",tasa:null,plazo:null,tipoPlazo:"Meses",abonosCapital:"no",valorAbono:null,frecuenciaAbono:"",cuotaInicio:null};submitCreditInfo(){this.validarFormulario()?this.onSubmitCreditInfo.emit(this.creditInfo):console.error("Formulario no v\xE1lido")}validarFormulario(){let t=this.creditInfo.monto!==null&&Number(this.creditInfo.monto)>5e5&&this.creditInfo.tasa!==null&&this.creditInfo.plazo!==null;return this.creditInfo.abonosCapital==="si"?t&&this.creditInfo.valorAbono!==null&&Number(this.creditInfo.valorAbono)>1e4&&this.creditInfo.frecuenciaAbono!==""&&this.creditInfo.cuotaInicio!==null:t}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-info-credito-actual"]],outputs:{onSubmitCreditInfo:"onSubmitCreditInfo"},decls:52,vars:8,consts:[[1,"d-flex","justify-content-center"],[1,"w-auto","p-3"],[1,"container","mt-3"],[3,"ngSubmit"],[1,"mb-3"],["for","monto",1,"form-label"],["type","text","id","monto","currencyMask","","name","monto","required","","placeholder","Ejemplo: 10.000.000",1,"form-control",3,"ngModelChange","ngModel"],["for","tipoTasa",1,"form-label"],["id","tipoTasa","name","tipoTasa","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","TEA"],["value","TNM"],["for","tasa",1,"form-label"],["type","number","id","tasa","name","tasa","required","","placeholder","Ejemplo: 12.5%",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-6","mb-3"],["for","plazo",1,"form-label"],["type","number","id","plazo","name","plazo","required","","placeholder","Ejemplo: 72",1,"form-control",3,"ngModelChange","ngModel"],["for","tipoPlazo",1,"form-label"],["id","tipoPlazo","name","tipoPlazo","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","Meses"],["value","A\xF1os"],[1,"mb-3","text-center"],[1,"form-check","form-check-inline"],["type","radio","name","abonosCapital","id","siAbonos","value","si","required","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","siAbonos",1,"form-check-label"],["type","radio","name","abonosCapital","id","noAbonos","value","no","required","",1,"form-check-input",3,"ngModelChange","ngModel"],["for","noAbonos",1,"form-check-label"],[4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary"],["for","valorAbono",1,"form-label"],["type","text","id","valorAbono","currencyMask","","name","valorAbono","required","","placeholder","Ejemplo: 100.000",1,"form-control",3,"ngModelChange","ngModel"],["class","mb-3",4,"ngIf"],["for","frecuenciaAbono",1,"form-label"],["id","frecuenciaAbono","name","frecuenciaAbono","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","monthly"],["value","biannual"],["value","annual"],["value","one-time"],["for","cuotaInicio",1,"form-label"],["type","number","id","cuotaInicio","name","cuotaInicio","required","","placeholder","Ejemplo: 1",1,"form-control",3,"ngModelChange","ngModel"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),i(4,"Informaci\xF3n del Cr\xE9dito Actual"),n(),e(5,"form",3),_("ngSubmit",function(){return a.submitCreditInfo()}),e(6,"div",4)(7,"label",5),i(8,"Monto:"),n(),e(9,"input",6),g("ngModelChange",function(l){return C(a.creditInfo.monto,l)||(a.creditInfo.monto=l),l}),n()(),e(10,"div",4)(11,"label",7),i(12,"Tipo de Tasa"),n(),e(13,"select",8),g("ngModelChange",function(l){return C(a.creditInfo.tipoTasa,l)||(a.creditInfo.tipoTasa=l),l}),e(14,"option",9),i(15,"Tasa Efectiva Anual"),n(),e(16,"option",10),i(17,"Tasa Nominal Mensual"),n()()(),e(18,"div",4)(19,"label",11),i(20,"% Tasa:"),n(),e(21,"input",12),g("ngModelChange",function(l){return C(a.creditInfo.tasa,l)||(a.creditInfo.tasa=l),l}),n()(),e(22,"div",13)(23,"div",14)(24,"label",15),i(25,"Plazo:"),n(),e(26,"input",16),g("ngModelChange",function(l){return C(a.creditInfo.plazo,l)||(a.creditInfo.plazo=l),l}),n()(),e(27,"div",14)(28,"label",17),i(29,"Tipo de Plazo"),n(),e(30,"select",18),g("ngModelChange",function(l){return C(a.creditInfo.tipoPlazo,l)||(a.creditInfo.tipoPlazo=l),l}),e(31,"option",19),i(32,"Meses"),n(),e(33,"option",20),i(34,"A\xF1os"),n()()()(),y(35,"hr"),e(36,"div",21)(37,"label"),i(38,"\xBFDesea realizar abonos a capital?"),n(),e(39,"div")(40,"div",22)(41,"input",23),g("ngModelChange",function(l){return C(a.creditInfo.abonosCapital,l)||(a.creditInfo.abonosCapital=l),l}),n(),e(42,"label",24),i(43,"S\xED"),n()(),e(44,"div",22)(45,"input",25),g("ngModelChange",function(l){return C(a.creditInfo.abonosCapital,l)||(a.creditInfo.abonosCapital=l),l}),n(),e(46,"label",26),i(47,"No"),n()()()(),c(48,be,7,3,"div",27),e(49,"div",28)(50,"button",29),i(51,"Confirmar"),n()()()()()()),t&2&&(r(9),f("ngModel",a.creditInfo.monto),r(4),f("ngModel",a.creditInfo.tipoTasa),r(8),f("ngModel",a.creditInfo.tasa),r(5),f("ngModel",a.creditInfo.plazo),r(4),f("ngModel",a.creditInfo.tipoPlazo),r(11),f("ngModel",a.creditInfo.abonosCapital),r(4),f("ngModel",a.creditInfo.abonosCapital),r(3),p("ngIf",a.creditInfo.abonosCapital==="si"))},dependencies:[v,se,ee,oe,ae,Q,te,ie,ne,X,Y,re,$,Z],encapsulation:2})};function Ae(o,s){if(o&1&&(e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),I(5,"customCurrency"),n(),e(6,"td"),i(7),I(8,"customCurrency"),n(),e(9,"td"),i(10),I(11,"customCurrency"),n(),e(12,"td"),i(13),I(14,"customCurrency"),n(),e(15,"td"),i(16),I(17,"customCurrency"),n()()),o&2){let t=s.$implicit;r(2),u(t.installmentNumber),r(2),u(A(5,6,t.principalOwed)),r(3),u(A(8,8,t.principalPaid)),r(3),u(A(11,10,t.interestPaid)),r(3),u(A(14,12,t.totalPayment)),r(3),u(A(17,14,t.remainingBalance))}}var B=class o{data=[];title="";constructor(){}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-shared-table"]],inputs:{data:"data",title:"title"},decls:20,vars:2,consts:[[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"table-dark"],[4,"ngFor","ngForOf"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"h3"),i(2),n(),e(3,"table",1)(4,"thead",2)(5,"tr")(6,"th"),i(7,"Cuota"),n(),e(8,"th"),i(9,"Capital Pendiente"),n(),e(10,"th"),i(11,"Capital Pagado"),n(),e(12,"th"),i(13,"Intereses Pagados"),n(),e(14,"th"),i(15,"Pago Total"),n(),e(16,"th"),i(17,"Balance Restante"),n()()(),e(18,"tbody"),c(19,Ae,18,16,"tr",3),n()()()),t&2&&(r(2),u(a.title),r(17),p("ngForOf",a.data))},dependencies:[U,N]})};function he(o,s){if(o&1&&y(0,"app-shared-table",3),o&2){let t=d();p("data",t.loanAnalysisResponse.withCapitalRepayment)}}var M=class o{loanAnalysisResponse;constructor(){}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-tabla-amortizacion"]],inputs:{loanAnalysisResponse:"loanAnalysisResponse"},decls:3,vars:2,consts:[[1,"container","mt-3"],["title","Amortizaci\xF3n sin Abonos a Capital",3,"data"],["title","Amortizaci\xF3n con Abonos a Capital",3,"data",4,"ngIf"],["title","Amortizaci\xF3n con Abonos a Capital",3,"data"]],template:function(t,a){t&1&&(e(0,"div",0),y(1,"app-shared-table",1),c(2,he,1,1,"app-shared-table",2),n()),t&2&&(r(),p("data",a.loanAnalysisResponse.withoutCapitalRepayment),r(),p("ngIf",a.loanAnalysisResponse.withCapitalRepayment))},dependencies:[v,B]})};function Se(o,s){if(o&1&&(e(0,"div",13),i(1),e(2,"a",14),i(3,"Ver m\xE1s tasas de intereses de otros bancos"),n()()),o&2){let t=d();r(),H(" Considera contactar a ",t.suggestion.bankName," para refinanciar tu pr\xE9stamo a una tasa m\xE1s baja de ",t.suggestion.suggestedBankRate,"%, comparada con tu tasa actual de ",t.suggestion.currentRate,"%. ")}}function Me(o,s){if(o&1&&y(0,"app-tabla-amortizacion",15),o&2){let t=d();p("loanAnalysisResponse",t.loanAnalysisResponse)}}var x=class o{loanAnalysisResponse;analysis;suggestion=null;showAmortizationTables=!1;constructor(){}toggleAmortizationTables(){this.showAmortizationTables=!this.showAmortizationTables}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-analisis-credito"]],inputs:{loanAnalysisResponse:"loanAnalysisResponse",analysis:"analysis",suggestion:"suggestion"},decls:48,vars:15,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-12"],[1,"text-center","mb-4"],[1,"col-md-6","d-flex","align-items-stretch"],[1,"card","w-100"],[1,"card-header"],[1,"card-body"],[1,"card-text"],[1,"card-footer","text-center"],["class","alert alert-info mt-2",4,"ngIf"],["type","button",1,"btn","btn-primary","mb-6",3,"click"],[3,"loanAnalysisResponse",4,"ngIf"],[1,"alert","alert-info","mt-2"],["routerLink","/info-tasas/bank-interest-rates",1,"btn","btn-link"],[3,"loanAnalysisResponse"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),i(4,"An\xE1lisis Detallado del Cr\xE9dito"),n()()(),e(5,"div",1)(6,"div",4)(7,"div",5)(8,"div",6),i(9,"Sin Abonos a Capital"),n(),e(10,"div",7)(11,"p",8),i(12,"Intereses totales sin abonos a capital: "),e(13,"strong"),i(14),I(15,"customCurrency"),n()(),e(16,"p",8),i(17,"Pagar\xEDas el cr\xE9dito en: "),e(18,"strong"),i(19),n()()()()(),e(20,"div",4)(21,"div",5)(22,"div",6),i(23,"Con Abonos a Capital"),n(),e(24,"div",7)(25,"p",8),i(26,"Intereses totales realizando abonos a capital: "),e(27,"strong"),i(28),I(29,"customCurrency"),n()(),e(30,"p",8),i(31,"Esto te estar\xEDa ahorrando: "),e(32,"strong"),i(33),I(34,"customCurrency"),n()(),e(35,"p",8),i(36,"Pagar\xEDas el cr\xE9dito en: "),e(37,"strong"),i(38),n()(),e(39,"p",8),i(40,"Disminuyendo "),e(41,"strong"),i(42),n()()()()()(),e(43,"div",9),c(44,Se,4,3,"div",10),e(45,"button",11),_("click",function(){return a.toggleAmortizationTables()}),i(46),n()(),c(47,Me,1,1,"app-tabla-amortizacion",12),n()),t&2&&(r(14),u(A(15,9,a.analysis.totalInterestWithoutRepayment)),r(5),E("",a.analysis.monthsWithoutRepayment," Meses"),r(9),u(A(29,11,a.analysis.totalInterestWithRepayment)),r(5),u(A(34,13,a.analysis.interestSaved)),r(5),E("",a.analysis.monthsWithRepayment," Meses"),r(4),E("",a.analysis.monthsSaved," cuotas"),r(2),p("ngIf",a.suggestion),r(2),E(" ",a.showAmortizationTables?"Ocultar Tablas de Amortizaci\xF3n":"Ver Tablas de Amortizaci\xF3n"," "),r(),p("ngIf",a.showAmortizationTables))},dependencies:[v,pe,M,N]})};function Ee(o,s){if(o&1&&y(0,"app-analisis-credito",3),o&2){let t=d();p("loanAnalysisResponse",t.loanAnalysisResponse)("analysis",t.loanAnalysisResponse.analysis)("suggestion",t.loanAnalysisResponse.suggestion)}}var D=class o{constructor(s){this.loanAnalysisService=s}loanAnalysisResponse;handleCreditSubmission(s){this.loanAnalysisService.analyzeLoan(s).subscribe({next:t=>{this.loanAnalysisResponse=t},error:t=>console.error("Error al obtener los datos de an\xE1lisis",t)})}static \u0275fac=function(t){return new(t||o)(O(W))};static \u0275cmp=b({type:o,selectors:[["app-gestion-credito-main"]],decls:6,vars:1,consts:[[1,"container","mt-3"],[3,"onSubmitCreditInfo"],[3,"loanAnalysisResponse","analysis","suggestion",4,"ngIf"],[3,"loanAnalysisResponse","analysis","suggestion"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"h5"),i(2,"Bienvenido a la Gesti\xF3n de Cr\xE9dito"),n(),y(3,"hr"),e(4,"app-info-credito-actual",1),_("onSubmitCreditInfo",function(l){return a.handleCreditSubmission(l)}),n(),c(5,Ee,1,3,"app-analisis-credito",2),n()),t&2&&(r(5),p("ngIf",a.loanAnalysisResponse))},dependencies:[v,S,x],encapsulation:2})};var Te=[{path:"",component:D,children:[{path:"",redirectTo:"info",pathMatch:"full"},{path:"info",component:S},{path:"analisis-credito",component:x},{path:"amortizacion",component:M}]}],k=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=T({imports:[j.forChild(Te),j]})};var ue=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=w({type:o});static \u0275inj=T({imports:[J,me,le,k,ce]})};export{ue as a};
